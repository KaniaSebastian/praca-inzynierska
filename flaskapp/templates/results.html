{% if current_user.is_admin %}
    {% extends "admin/layout_admin.html" %}
{% elif current_user.group.is_containing_sections%}
    {% extends "layout_section.html" %}
{% else %}
    {% extends "layout_user.html" %}
{% endif %}


{% block content %}

    {% if group.rating_status != 'ended' and group.rating_status != 'ended_improvement' %}
        {% if current_user.is_admin %}
            <div class="jumbotron">
              <p class="lead">{{ gettext('Ocenianie nie zostało jeszcze zakończone. Możesz zakończyć ocenianie w sekcji "Zarządzanie grupami".') }}</p>
            </div>
        {% else %}
            <div class="jumbotron">
              <p class="lead">{{ gettext('Ocenianie nie zostało jeszcze zakończone. Wyniki ukażą się po zakończeniu oceniania przez grupę.') }}</p>
            </div>
        {% endif %}
    {% else %}

        <div class="jumbotron">
            {% if not current_user.is_admin %}
                {% if user_project %}
                    <p>
                      <h4>{{ gettext('Twój') }} <a href="{{ url_for('main.project_view') }}">{{ gettext('projekt') }}</a> {{ gettext('uzyskał') }}:</h4>
                      <ul>
                        <li><b> {{ user_project.score_points_pool }} {{ gettext('pkt') }} </b> {{ gettext('od użytkowników oceniających metodą pierwszą') }},</li>
                        <li><b> {{ user_project.score_points_pool_shuffled }} {{ gettext('pkt') }} </b> {{ gettext('od użytkowników oceniających metodą drugą') }},</li>
                        <li><b> {{ (user_project.score_pool_per_project/raters_pool_per_project_nums.get(user_project))|round(2) }}/{{ user_project.author.group.points_per_project }} {{ gettext('pkt') }} </b> {{ gettext('od użytkowników oceniających metodą trzecią') }},</li>
                        <li class="text-info"><b> {{ user_project.score_admin }}/{{ user_project.author.group.points_per_project }} {{ gettext('pkt') }} </b> {{ gettext('od nauczyciela') }}.</li>
                        {% if user_project.score_admin_improvement %}
                          <li class="text-success"><b> {{ user_project.score_admin_improvement }}/{{ user_project.author.group.points_per_project }} {{ gettext('pkt') }} </b> {{ gettext('od nauczyciela po poprawie') }}.</li>
                        {% endif %}
                        {% if user_project.user_distinctions > 0 %}
                        <li>{{ gettext('Ten projekt został wyróżniony przez studentów') }}. {{ gettext('Liczba wyróżnień to') }}: {{ user_project.user_distinctions }}<i class="fas fa-star icon-color-gold"></i>.</li>
                        {% endif %}
                        {% if user_project.admin_distinction > 0 %}
                          <li>{{ gettext('Ten projekt został wyróżniony przez nauczyciela') }}<i class="fas fa-star icon-color-gold"></i>.</li>
                        {% endif %}
                      </ul>
                    </p>
                  <hr class="my-4">
                {% endif %}
            {% endif %}
          <h6><p class="lead">{{ gettext('W głosowaniu wzięło udział') }} {{ users_that_rated_num }} {{ gettext('użytkowników.') }} {{ gettext('Ocenianie zostało przeprowadzone 3 różnymi metodami. Każdy z użytkowników oceniał losowo wybraną metodą.')}}</p></h6>
          <h6><p class="lead">
            {{ gettext('Pierwsza metoda polegała na przyznaniu wszystkim projektom punktów ze wspólnej puli') }}.
            {{ gettext('Druga metoda była podobna do pierwszej i różniła się tym, że prace były wyświetlane w kolejności losowej (na podstawie wyników można więc sprawdzić czy kolejność w jakiej prace były wyświetlane miała wpływ na uzyskane wyniki).') }}
            {{ gettext('Trzecia metoda polegała na przyznaniu dla każdego projektu punktów w skali od 1 do ') }} {{ group.points_per_project }}. {{ gettext('Osoby oceniające tą metodą mogły także przyznać projektom wyróżnienia') }}.
            {{ gettext('Nauczyciel oceniał metodą trzecią') }}.
          </p></h6>
        </div>

        <ul class="nav nav-tabs mb-3" id="myTab" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="view-tab" data-toggle="tab" href="#view" role="tab" aria-controls="view" aria-selected="true">{{ gettext('Podgląd') }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="table-tab-method-1" data-toggle="tab" href="#sorted-table-method-1" role="tab" aria-controls="table" aria-selected="false">{{ gettext('Ranking-metoda 1') }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="table-tab-method-2" data-toggle="tab" href="#sorted-table-method-2" role="tab" aria-controls="table" aria-selected="false">{{ gettext('Ranking-metoda 2') }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="table-tab-method-3" data-toggle="tab" href="#sorted-table-method-3" role="tab" aria-controls="table" aria-selected="false">{{ gettext('Ranking-metoda 3') }}</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="table-tab-teacher" data-toggle="tab" href="#sorted-table-teacher" role="tab" aria-controls="table" aria-selected="false">{{ gettext('Ranking-ocena nauczyciela') }}</a>
          </li>
          <!--<li class="nav-item">-->
            <!--<a class="nav-link" id="sorted-table-tab" data-toggle="tab" href="#table" role="tab" aria-controls="table" aria-selected="false">{{ gettext('Spis wg sekcji') }}</a>-->
          <!--</li>-->
        </ul>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="view" role="tabpanel" aria-labelledby="home-tab">
              {% for project in group_projects %}
                {% if user_project and project == user_project %}
                    <div class="card mb-3 mx-auto border border-info bg-light" style="max-width: 720px;">
                {% else %}
                    <div class="card mb-3 mx-auto" style="max-width: 720px;">
                {% endif %}
                  <div class="card-header">
                      {{ gettext('Sekcja nr') }} {{ project.author.section_number }} {{ gettext('zdobyła') }}:<br>
                      <li><b> {{ project.score_points_pool }} {{ gettext('pkt') }} </b> {{ gettext('od użytkowników oceniających metodą pierwszą') }},</li>
                      <li><b> {{ project.score_points_pool_shuffled }} {{ gettext('pkt') }} </b> {{ gettext('od użytkowników oceniających metodą drugą') }},</li>
                      <li><b> {{ (project.score_pool_per_project/raters_pool_per_project_nums.get(project))|round(2) }}/{{ project.author.group.points_per_project }} {{ gettext('pkt') }} </b> {{ gettext('od użytkowników oceniających metodą trzecią') }},</li>
                      <li class="text-info"><b> {{ project.score_admin }}/{{ project.author.group.points_per_project }} {{ gettext('pkt') }} </b> {{ gettext('od nauczyciela') }}.</li>
                      {% if group.admin_rating_status == 'finished_improvement' %}
                        <li class="text-success"><b> {{ project.score_admin_improvement }}/{{ group.points_per_project }} {{ gettext('pkt') }} </b> {{ gettext('od nauczyciela po poprawie projektu') }}.</li>
                      {% endif %}
                      {% if project.user_distinctions > 0%}
                        <li>{{ gettext('Ten projekt został wyróżniony przez studentów') }}. {{ gettext('Liczba wyróżnień to') }}: {{ project.user_distinctions }}<i class="fas fa-star icon-color-gold"></i>.</li>
                      {% endif %}
                      {% if project.admin_distinction > 0%}
                        <li>{{ gettext('Ten projekt został wyróżniony przez nauczyciela') }}<i class="fas fa-star icon-color-gold"></i>.</li>
                      {% endif %}
                  </div>
                  <div class="row no-gutters">
                    <div class="col-md-4 border-bottom">
                        <a href="{{ url_for('static', filename='projects/' + project.upload_file) }} " target="_blank">
                            {% set extension = project.upload_file.split('.') %}
                            {% if extension[1] == 'pdf' %}
                                <img src="{{ url_for('static', filename='default_pdf_icon.png') }}" class="card-img" alt="{{ gettext('PDF') }}">
                            {% else %}
                                <img src="{{ url_for('static', filename='projects/' + project.upload_file) }}" class="card-img" alt="{{ gettext('Grafika') }}">
                            {% endif %}
                        </a>
                    </div>
                    <div class="col-md-8 border-left">
                      <div class="card-body">
                        <h5 class="card-title">{{ project.title }}</h5>
                        <p class="card-text">{{ project.description }}</p>
                        {% if project.optional_link %}
                            <p class="blockquote-footer mt-5"> <a class="text-secondary" href="{{ project.optional_link }}" target="_blank" title="{{ project.optional_link }}">{{ gettext('Dodatkowy załącznik') }}<i class="fa fa-external-link fa-lg text-info ml-1"></i></a> </p>
                        {% endif %}
                        <p class="card-text custom-card-footer">
                            {% if project.author.group.upload_time and project.date_posted < project.author.group.upload_time %}
                                <small class="text-muted">{{ gettext('Ostatnio edytowano:') }} <span class="text-success"><b> {{ project.date_posted.strftime('%d-%m-%Y') }} </b> {{ gettext('o godzinie') }} <b> {{ project.date_posted.strftime('%H:%M') }}</b></span></small>
                            {% elif not project.author.group.upload_time %}
                                <small class="text-muted">{{ gettext('Ostatnio edytowano:') }} <span><b> {{ project.date_posted.strftime('%d-%m-%Y') }} </b> {{ gettext('o godzinie') }} <b> {{ project.date_posted.strftime('%H:%M') }}</b></span></small>
                            {% else %}
                                <small class="text-muted">{{ gettext('Ostatnio edytowano:') }} <span class="text-danger"><b> {{ project.date_posted.strftime('%d-%m-%Y') }} </b> {{ gettext('o godzinie') }} <b> {{ project.date_posted.strftime('%H:%M') }}</b></span></small>
                            {% endif %}
                        </p>
                      </div>
                    </div>
                  </div>
                  <!--Comments-->
                  <div id="accordion">
                    <!--First card-->
                    <div class="card">
                      <div class="card-header" id="headingOne">
                        <h5 class="mb-0">
                          <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseOne-{{ project.id }}" aria-expanded="false" aria-controls="collapseOne">
                            {{ gettext('Komentarze od nauczyciela') }}
                            <i class="fa fa-lg" aria-hidden="true"></i>
                            {% if group.rating_status == 'ended_improvement' %}
                              {% for comment in project.comments if comment.author.is_admin and comment.second_iteration %}
                                <span class="badge badge-pill badge-info">{{ gettext('Nowy') }}</span>
                              {% endfor %}
                            {% endif %}
                          </button>
                        </h5>
                      </div>

                      <div id="collapseOne-{{ project.id }}" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                        <div class="card-body">

                          {% if group.rating_status == 'ended_improvement' %}
                            {% for comment in project.comments %}
                              {% if comment.author.is_admin and comment.second_iteration %}
                                <div class="card mb-2">
                                  <div class="card-header">
                                    {{ gettext('Komentarz do poprawionej pracy') }}
                                  </div>
                                  <div class="card-body">
                                    <li> {{ comment.comment_wish }} </li>
                                  </div>
                                </div>
                              {% endif %}
                            {% endfor %}
                          {% endif %}

                          <div class="card mb-2">
                            <div class="card-header">
                              {{ gettext('Pozytywne cechy pracy') }}
                            </div>
                            <div class="card-body">
                              {% for comment in project.comments %}
                                {% if comment.author.is_admin and not comment.second_iteration %}
                                  <li> {{ comment.comment_star_1 }} </li>
                                  <li> {{ comment.comment_star_2 }} </li>
                                {% endif %}
                              {% endfor %}
                            </div>
                          </div>

                          <div class="card">
                            <div class="card-header">
                              {{ gettext('Rzecz, którą można poprawić') }}
                            </div>
                            <div class="card-body">
                              {% for comment in project.comments %}
                                {% if comment.author.is_admin and not comment.second_iteration %}
                                  <li> {{ comment.comment_wish }} </li>
                                {% endif %}
                              {% endfor %}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!--Second card-->
                    <div class="card">
                      <div class="card-header" id="headingTwo">
                        <h5 class="mb-0">
                          <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo-{{ project.id }}" aria-expanded="false" aria-controls="collapseTwo">
                            Komentarze od studentów
                            <i class="fa fa-lg" aria-hidden="true"></i>
                          </button>
                        </h5>
                      </div>
                      <div id="collapseTwo-{{ project.id }}" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                        <div class="card-body">
                          <div class="card mb-2">
                            <div class="card-header">
                              {{ gettext('Pozytywne cechy pracy') }}
                            </div>
                            <div class="card-body">
                              {% for comment in project.comments %}
                                {% if not comment.author.is_admin %}
                                  <li> {{ comment.comment_star_1 }} </li>
                                  <li> {{ comment.comment_star_2 }} </li>
                                {% endif %}
                              {% endfor %}
                            </div>
                          </div>
                          <div class="card">
                            <div class="card-header">
                              {{ gettext('Rzeczy, które można poprawić') }}
                            </div>
                            <div class="card-body">
                              {% for comment in project.comments %}
                                {% if not comment.author.is_admin %}
                                  <li> {{ comment.comment_wish }} </li>
                                {% endif %}
                              {% endfor %}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
              </div>

            {% endfor %}
          </div>

          <div class="tab-pane fade" id="table" role="tabpanel" aria-labelledby="profile-tab">
            <table class="table table-hover text-center table-striped">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">{{ gettext('Sekcja') }}</th>
                  <th scope="col">{{ gettext('Zdobyte punkty') }}</th>
                  <th scope="col">{{ gettext('Projekt') }}</th>
                  {% if current_user.is_admin %}
                      <th scope="col">{{ gettext('Ostatnia edycja') }}</th>
                  {% endif %}
                </tr>
              </thead>

              <tbody>

              {% for project in group_projects %}
                {% if not current_user.is_admin and project == user_project %}
                    <tr class="table-row-hover border border-thick" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% else %}
                    <tr class="table-row-hover" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% endif %}
                  <td>{{ gettext('Sekcja') }} {{ project.author.section_number }}</td>
                  <td>{{ project.score_points_pool }}, {{ project.score_points_pool_shuffled }}</td>
                  <td>{{ project.title }}</td>
                  {% if current_user.is_admin %}
                      <td>
                        {% if project.author.group.upload_time and project.date_posted < project.author.group.upload_time %}
                            <span class="text-success"><b> {{ gettext('w terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% elif not project.author.group.upload_time %}
                            <span><b> {{ gettext('w terminie') }}</b></span>
                        {% else %}
                            <span class="text-danger"><b> {{ gettext('po terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% endif %}
                      </td>
                  {% else %}
                  {% endif %}
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>

          <div class="tab-pane fade" id="sorted-table-method-1" role="tabpanel" aria-labelledby="profile-tab">
            <table class="table table-hover text-center table-striped">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">{{ gettext('Sekcja') }}</th>
                  <th scope="col">{{ gettext('Zdobyte punkty') }}</th>
                  <th scope="col">{{ gettext('Projekt') }}</th>
                  {% if current_user.is_admin %}
                      <th scope="col">{{ gettext('Ostatnia edycja') }}</th>
                  {% endif %}
                </tr>
              </thead>

              <tbody>

              {% for project in group_projects|sort(attribute='score_points_pool', reverse=True) %}
                {% if not current_user.is_admin and project == user_project %}
                    <tr class="table-row-hover border border-thick" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% else %}
                    <tr class="table-row-hover" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% endif %}
                  <td>{{ gettext('Sekcja') }} {{ project.author.section_number }}</td>
                  <td>{{ project.score_points_pool }}</td>
                  <td>{{ project.title }}</td>
                  {% if current_user.is_admin %}
                      <td>
                        {% if project.author.group.upload_time and project.date_posted < project.author.group.upload_time %}
                            <span class="text-success"><b> {{ gettext('w terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% elif not project.author.group.upload_time %}
                            <span><b> {{ gettext('w terminie') }}</b></span>
                        {% else %}
                            <span class="text-danger"><b> {{ gettext('po terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% endif %}
                      </td>
                  {% else %}
                  {% endif %}
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>

          <div class="tab-pane fade" id="sorted-table-method-2" role="tabpanel" aria-labelledby="profile-tab">
            <table class="table table-hover text-center table-striped">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">{{ gettext('Sekcja') }}</th>
                  <th scope="col">{{ gettext('Zdobyte punkty') }}</th>
                  <th scope="col">{{ gettext('Projekt') }}</th>
                  {% if current_user.is_admin %}
                      <th scope="col">{{ gettext('Ostatnia edycja') }}</th>
                  {% endif %}
                </tr>
              </thead>

              <tbody>

              {% for project in group_projects|sort(attribute='score_points_pool_shuffled', reverse=True) %}
                {% if not current_user.is_admin and project == user_project %}
                    <tr class="table-row-hover border border-thick" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% else %}
                    <tr class="table-row-hover" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% endif %}
                  <td>{{ gettext('Sekcja') }} {{ project.author.section_number }}</td>
                  <td>{{ project.score_points_pool_shuffled }}</td>
                  <td>{{ project.title }}</td>
                  {% if current_user.is_admin %}
                      <td>
                        {% if project.author.group.upload_time and project.date_posted < project.author.group.upload_time %}
                            <span class="text-success"><b> {{ gettext('w terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% elif not project.author.group.upload_time %}
                            <span><b> {{ gettext('w terminie') }}</b></span>
                        {% else %}
                            <span class="text-danger"><b> {{ gettext('po terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% endif %}
                      </td>
                  {% else %}
                  {% endif %}
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>

          <div class="tab-pane fade" id="sorted-table-method-3" role="tabpanel" aria-labelledby="profile-tab">
            <table class="table table-hover text-center table-striped">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">{{ gettext('Sekcja') }}</th>
                  <th scope="col">{{ gettext('Zdobyte punkty') }}</th>
                  <th scope="col">{{ gettext('Wyróżnienia') }}</th>
                  <th scope="col">{{ gettext('Projekt') }}</th>
                  {% if current_user.is_admin %}
                      <th scope="col">{{ gettext('Ostatnia edycja') }}</th>
                  {% endif %}
                </tr>
              </thead>

              <tbody>

              {% for project in group_projects_sorted %}
                {% if not current_user.is_admin and project == user_project %}
                    <tr class="table-row-hover border border-thick" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% else %}
                    <tr class="table-row-hover" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% endif %}
                  <td>{{ gettext('Sekcja') }} {{ project.author.section_number }}</td>
                  <td>{{ (project.score_pool_per_project/raters_pool_per_project_nums.get(project))|round(2) }}/{{ project.author.group.points_per_project }}</td>
                  {% if project.user_distinctions > 0 %}
                      <td>{{ project.user_distinctions }}<i class="fas fa-star icon-color-gold"></i> </td>
                  {% else %}
                      <td>--</td>
                  {% endif %}
                  <td>{{ project.title }}</td>
                  {% if current_user.is_admin %}
                      <td>
                        {% if project.author.group.upload_time and project.date_posted < project.author.group.upload_time %}
                            <span class="text-success"><b> {{ gettext('w terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% elif not project.author.group.upload_time %}
                            <span><b> {{ gettext('w terminie') }}</b></span>
                        {% else %}
                            <span class="text-danger"><b> {{ gettext('po terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% endif %}
                      </td>
                  {% else %}
                  {% endif %}
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>

          <div class="tab-pane fade" id="sorted-table-teacher" role="tabpanel" aria-labelledby="profile-tab">
            <table class="table table-hover text-center table-striped">
              <thead class="thead-dark">
                <tr>
                  <th scope="col">{{ gettext('Sekcja') }}</th>
                  <th scope="col">{{ gettext('Zdobyte punkty') }}</th>
                  <th scope="col">{{ gettext('Dodatkowe wyróżnienie') }}</th>
                  <th scope="col">{{ gettext('Projekt') }}</th>
                  {% if current_user.is_admin %}
                      <th scope="col">{{ gettext('Ostatnia edycja') }}</th>
                  {% endif %}
                </tr>
              </thead>

              <tbody>

              {% for project in group_projects|sort(attribute='score_admin', reverse=True) %}
                {% if not current_user.is_admin and project == user_project %}
                    <tr class="table-row-hover border border-thick" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% else %}
                    <tr class="table-row-hover" data-href=" {{ url_for('static', filename='projects/' + project.upload_file) }} ">
                {% endif %}
                  <td>{{ gettext('Sekcja') }} {{ project.author.section_number }}</td>
                  {% if group.rating_status != 'ended_improvement' %}
                    <td>{{ project.score_admin }}/{{ project.author.group.points_per_project }}</td>
                  {% else %}
                    <td>
                      <span class="text-info" data-toggle="tooltip" data-placement="right" title="{{ gettext('Ocena nauczyciela w 1 turze') }}"><s>{{ project.score_admin }}/{{ project.author.group.points_per_project }}</s> <i class="fas fa-info-circle text-primary fa-sm"></i></span> </br>
                      <span class="text-success" data-toggle="tooltip" data-placement="right" title="{{ gettext('Ocena nauczyciela w 2 turze (po poprawie)') }}"> {{ project.score_admin_improvement }}/{{ project.author.group.points_per_project }} <i class="fas fa-info-circle text-primary fa-sm"></i></span>
                    </td>
                  {% endif %}
                  {% if project.admin_distinction > 0 %}
                      <td><i class="fas fa-star icon-color-gold"></i> </td>
                  {% else %}
                      <td>--</td>
                  {% endif %}
                  <td>{{ project.title }}</td>
                  {% if current_user.is_admin %}
                      <td>
                        {% if project.author.group.upload_time and project.date_posted < project.author.group.upload_time %}
                            <span class="text-success"><b> {{ gettext('w terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% elif not project.author.group.upload_time %}
                            <span><b> {{ gettext('w terminie') }}</b></span>
                        {% else %}
                            <span class="text-danger"><b> {{ gettext('po terminie') }} </b> <i class="fa fa-info-circle text-info" data-toggle="tooltip" data-placement="top" title="{{ project.date_posted.strftime('%d-%m-%Y') }} {{ gettext('o godzinie') }} {{ project.date_posted.strftime('%H:%M') }}"></i> </span>
                        {% endif %}
                      </td>
                  {% else %}
                  {% endif %}
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>

        </div>

    {% endif %}

{% endblock content %}

{% block scripts %}
    {{ super() }}
    <script type=text/javascript>
        $(document).ready(function($) {
            $(".table-row-hover").click(function() {
                window.open($(this).data("href"), '_blank');
            });
        });

        $(function () {
          $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
{% endblock scripts %}